(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";!function(){const e=require("./statisticManager");let n=function(){function n(n,t,i,s,r){this.menuContainer=n,this.menu=t,this.menuItems=this.menu.fullMenu.map(e=>Object.assign({},e)),this.banners=[],this.premiumLogos=null,this.getAbsoluteUrl=r,this._setBanners(i),this._setLogos(s),this.innerMenuContainer=this.menuContainer.querySelector(".j-menu-burger-drop"),this.selectedMenuItem=null,this.innerMenuItems=[],this.shownBanners=new Set,this.statisticManager=new e(this.shownBanners),this.selectedInnerMenuItems={firstPart:null,secondPart:null,back:null},this.menuSelectedHandler=this.menuSelectedHandler.bind(this),this.onDenyLinksClicked=this.onDenyLinksClicked.bind(this),this.sendClickMenuLinkEvent=this.sendClickMenuLinkEvent.bind(this),this.sendClickMenuBannerEvent=this.sendClickMenuBannerEvent.bind(this),this.innerMenuHide=this.innerMenuHide.bind(this),this.menuDropItemOpen=this.menuDropItemOpen.bind(this),this.moveToBrand=this.moveToBrand.bind(this),this.onloadBanner=this.onloadBanner.bind(this),this.onerrorBanner=this.onerrorBanner.bind(this)}var t=n.prototype;return t.moveToBrand=async function(e){const{data:n}=$.view(e.currentTarget),t=n.id;if(t){const e=await this.$httpClient.fetchBasicJSON(`https://static.wbstatic.net/data/brands-by-id/${t}.json`,{},{nullOnError:!0}).catch(e=>null);if(e)return this.$router.moveTo($.views.helpers.brandUrl(e.url))}},t.checkMenuItemForHide=function(e,n){e.forEach(e=>{Array.isArray(e.dest)&&e.dest.length&&(e.hide=!(null!=n&&n.some(n=>e.dest.includes(n)))),Array.isArray(e.childs)&&e.childs.length&&this.checkMenuItemForHide(e.childs,n)})},t.relinkModel=function(){$.unlink(this.menuContainer),$.link(!0,this.menuContainer,this)},t.findItem=function(e){return this.menuItems.find(n=>n.id==e)},t.clearShownBanners=function(){this.shownBanners.clear()},t.menuSelectedHandler=function(e){if(!e.currentTarget.classList.contains("menu-burger__main-list-item--subcategory"))return;"click"===e.type&&e.preventDefault();const n=(e=>{this.onMenuSelected(e.currentTarget)}).bind(this);this.touchHandlerHelper(e,n)},t.backLinkHandler=function(e){const n=(e=>{this.innerMenuHide(),this.changeSelectedMenuItem(null)}).bind(this);"click"===e.type?n(e):this.touchHandlerHelper(e,n)},t.tecDocSearchOpen=async function(){if(!this.tecdocPopup){const e=await this.$moduleLoader.loadModuleAsync("tecDocAuto"),n=e.getTecDocService();await n.tryInit(),this.tecdocPopup=e.createTecDocViewModel(null,!0)}this.tecdocPopup.openSearchFormPopup()},t.categorySelectHandler=function(e){const n=(e=>{e.currentTarget.classList.toggle("dropdown-open")}).bind(this);e.target.parentNode===e.currentTarget&&("click"===e.type?(e.preventDefault(),n(e)):this.touchHandlerHelper(e,n))},t.selectedCategoryClicked=function(e){this.$isDesktop||e.preventDefault()},t.sendClickMenuBannerEvent=function(e){this.statisticManager.sendClickMenuBannerEvent(e)},t.sendClickMenuLinkEvent=function(e){if(!this.$isDesktop&&e.currentTarget.classList.contains("j-menu-drop-link-subcategory"))return;const n=e.currentTarget.parents(".j-menu-main-item");let t,i,s;const{data:r}=$.view(e.currentTarget);if((null==n?void 0:n.length)>0){t=n[0].dataset.menuId;const e=this.menuItems.find(e=>e.id==t);if(!this.$isDesktop&&(e.childs||e.banners))return}else if(!this.$isDesktop){const n=e.currentTarget.closest(".j-menu-drop-link");null!=n&&n.dataset.menuId&&(t=n.dataset.menuId)}var o,u;"a"===e.currentTarget.tagName.toLowerCase()&&(i=e.currentTarget.text.trim(),s=null!==(o=null===(u=this.selectedMenuItem)||void 0===u?void 0:u.name)&&void 0!==o?o:"top");let c;e.currentTarget.closest(".j-menu-premium-brands")&&(c="CBP");const a=(e=>{this.statisticManager.sendClickMenuLinkEvent(t,i,s,null==r?void 0:r.id,c)}).bind(this);"click"===e.type?a(e):this.touchHandlerHelper(e,a)},t.menuDropItemOpen=function(e){const{data:n}=$.view(e.currentTarget);this._setSelectedInnerMenuItems(n)},t.onDenyLinksClicked=function(e){this.$isDesktop&&(e.preventDefault(),e.stopPropagation())},t.onMenuSelected=function(e){var n,t;const i=e.dataset.menuId;if(this.changeSelectedMenuItem(i),this.statisticManager.sendOpenMenuEvent(e,i),this.$isDesktop&&this.$eventBus.dispatchEvent(new CustomEvent("SelectedSideMenuItemUpdated",{detail:{menuId:i}})),null!==(n=this.selectedMenuItem)&&void 0!==n&&n.childs||null!==(t=this.selectedMenuItem)&&void 0!==t&&t.banners||this.selectedMenuItem.id==this.menu.menuIdEnum.promotion)if(this.selectedMenuItem.rendered)this._innerMenuOpen();else{const e=this.innerMenuContainer.querySelector(`.j-menu-drop-item-${this.selectedMenuItem.id}`);$.views.loadTemplateDictionaryAsync("menuTopTmpl").then(()=>{const n=$.templates.menuInnerItemsTmpl.link(e,this.selectedMenuItem,this);this.innerMenuItems.push(n[0]),this.selectedMenuItem.rendered=!0,this._innerMenuOpen()})}else this.innerMenuHide()},t.changeSelectedMenuItem=function(e){let n=null;if(e){var t;const i=null===(t=this.menuItems)||void 0===t?void 0:t.find(n=>n.id==e);i&&(n=i)}!n||n.rendered||n.banners||(n.banners=!!this.banners&&this.banners[e]),$.observable(this).setProperty({selectedMenuItem:n})},t.innerMenuHide=function(){this.innerMenuContainer.querySelectorAll(".dropdown-open").forEach(e=>{var n;null===(n=e.classList)||void 0===n||n.remove("dropdown-open")})},t.touchHandlerHelper=function(e,n){var t,i;e.preventDefault();const s=e.currentTarget,r="touchstart"===e.type?(null===(t=e.changedTouches)||void 0===t?void 0:t.length)>0&&e.changedTouches[0].clientX:e.clientX,o="touchstart"===e.type?(null===(i=e.changedTouches)||void 0===i?void 0:i.length)>0&&e.changedTouches[0].clientY:e.clientY;let u="touchstart"===e.type?"touchend":"mouseup";s.addEventListener(u,function e(t){var i,c;s.removeEventListener(u,e);const a="touchend"===t.type?(null===(i=t.changedTouches)||void 0===i?void 0:i.length)>0&&t.changedTouches[0].clientX:t.clientX,l="touchend"===t.type?(null===(c=t.changedTouches)||void 0===c?void 0:c.length)>0&&t.changedTouches[0].clientY:t.clientY,d=r-a+o-l;Math.abs(d)<=4&&n(t)})},t.isCommonMenuItem=function(e){return 4853!=e&&9540!=e&&128297!=e&&2192!=e},t.onloadBanner=function(e){const{data:n}=$.view(e.currentTarget.closest(".j-menu-drop-item"));this._setBannerError(n,!1)},t.onerrorBanner=function(e){const{data:n}=$.view(e.currentTarget.closest(".j-menu-drop-item"));this._setBannerError(n,!0)},t._setBanners=async function(e){var n;const t=await e;if(null===(n=this.menuItems)||void 0===n||n.forEach(e=>{$.observable(e).setProperty({banners:!!t&&t[e.id]})}),this.selectedMenuItem){const e=this._getSelectedMenuNode(this.selectedMenuItem);this._innerMenuImagesManipulations(e)}},t._setLogos=async function(e){const n=await e;if($.observable(this).setProperty({premiumLogos:n}),this.selectedMenuItem){const e=this._getSelectedMenuNode(this.selectedMenuItem);this._innerMenuImagesManipulations(e)}},t._innerMenuOpen=function(){this._setSelectedInnerMenuItems(this.selectedMenuItem);const e=this._getSelectedMenuNode(this.selectedMenuItem),n=e.querySelectorAll(".j-menu-inner-column");null==n||n.forEach(e=>{e.scrollTop=0}),this._innerMenuImagesManipulations(e)},t._getSelectedMenuNode=function(e){return this._filterNodeItem(this.innerMenuItems,n=>n.dataset.menuId==e.id)},t._innerMenuImagesManipulations=async function(e){e&&(await this._showImages(e),this.statisticManager.bindBannerClickListener(),this.statisticManager.bindBannerShowListener(e))},t._showImages=function(e){const n=[];return e.querySelectorAll(".j-menu-image").forEach(e=>{n.push(function(e){return new Promise((n,t)=>{const i=e.dataset.src;i!==e.src&&(e.onload=function(){n()},e.onerror=function(){t()},e.src=i)})}(e))}),Promise.all(n)},t._filterNodeItem=function(e,n){let t;return e.forEach(e=>{if(n&&n(e))return t=e,e}),t},t._setSelectedInnerMenuItems=function(e){var n,t,i,s;const r=this._getSelectedInnerMenuItems(e);(null===(n=this.selectedInnerMenuItems.firstPart)||void 0===n?void 0:n.id)==(null===(t=r.firstPart)||void 0===t?void 0:t.id)&&(null===(i=this.selectedInnerMenuItems.secondPart)||void 0===i?void 0:i.id)==(null===(s=r.secondPart)||void 0===s?void 0:s.id)||($.observable(this.selectedInnerMenuItems).setProperty({firstPart:null,secondPart:null,back:null}),$.observable(this.selectedInnerMenuItems).setProperty(r))},t._getSelectedInnerMenuItems=function(e){const n={firstPart:null,secondPart:null,back:null};return this.isCommonMenuItem(this.selectedMenuItem.id)?this.$isDesktop?this.selectedMenuItem.id==e.id?(n.firstPart=this.selectedMenuItem,n):(n.firstPart=e.parentId?this.menu.menuById.get(e.parentId):null,n.secondPart=e,n.back=null!==(t=n.firstPart)&&void 0!==t&&t.parentId?this.menu.menuById.get(n.firstPart.parentId):null,n):(n.firstPart=e,n.back=e.parentId?this.menu.menuById.get(e.parentId):"main",n):n;var t},t._setBannerError=function(e,n){$.observable(e).setProperty("bannerError",n)},n}();window.__spaModuleManager__.register("sideMenu",n)}();

},{"./statisticManager":2}],2:[function(require,module,exports){
"use strict";let StatisticManger=function(){function n(n){this.shownBanners=n}var t=n.prototype;return t.sendClickMenuLinkEvent=function(n,t,a,e,s){wb.analitics.saveState({l:null!=s?s:"CCC",t:null!=e?e:n}),wb.analitics.sendEvent("Catalog_Category_T",{name:t,parent_name:a})},t.sendClickMenuBannerEvent=function(n){const t=n.currentTarget;wb.analitics.saveState({l:t.dataset.analiticsCode})},t.sendOpenMenuEvent=function(n,t){if(null==t)return;if(!n.dataset.shownStatSent){n.dataset.shownStatSent=!0;const a=[];a.push(wb.stat.wrapParam("MId",t)),a.push(wb.stat.wrapParam("MT","top-menu")),wb.stat.sendEvent("MO",a,!0)}},t.bindBannerClickListener=function(){wb.stat.banners.initClickEvent()},t.bindBannerShowListener=function(n){if(this.shownBanners.has(n))return;this.shownBanners.add(n);const t=n.querySelectorAll(".j-banner");t.forEach(n=>{wb.stat.banners.sendShownStatistic(n),n.classList.contains("j-banner-wba")&&wb.analitics.sendBannersWbaEvent("Banner_S",n.title,n.dataset.analiticsCode,n.href,n.dataset.bannerIndex,n.dataset.bannerId)}),n.dataset.wbaBnrBlockStatSent||(n.dataset.wbaBnrBlockStatSent=!0,wb.analitics.bannerBlockStatForLoadWba(t))},n}();module.exports=StatisticManger;

},{}]},{},[1]);
