(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";$.templates({collapsibleBlockTemplate:'\n            {^{if needToggle && useGradient}}\n                <div class="collapsible__gradient" data-link="class{merge: !isCollapsed toggle=\'hide\'}"></div>\n            {{/if}}\n            {^{if needToggle}}\n                <div class="collapsible__toggle-wrap">\n                    <button class="collapsible__toggle {{:btnClass}}" {{if !!nameForWba}}data-name-for-wba=\'{{:nameForWba}}\'{{/if}} data-link=\'text{:isCollapsed ? collapsedMsg : unCollapsedMsg}class{merge: !isCollapsed && !unCollapsedMsg toggle="hide"}{on toggleCollapse !isCollapsed}\' type="button">Развернуть описание</button>\n                </div>\n            {{/if}}'}),$.views.tags({collapsibleBlock:{dataBoundOnly:!0,bindTo:["maxCollapsedHeight"],init(){this.reset=this.reset.bind(this),this.recalc=this.recalc.bind(this),this.ctx.root.$helper.nextTick().then(()=>{let e,t;const s=this.tagCtx.props.itemSelector,l=this.tagCtx.props.maxCollapsedHeight,o=this.tagCtx.props.countLineClamp;try{t=(e=document.querySelector(s)).offsetHeight}catch(e){return void console.warn("selector is incorrect or elem doesnt exist")}e.style.maxHeight=this.tagCtx.props.maxCollapsedHeight+"px",e.style.webkitLineClamp=this.tagCtx.props.countLineClamp?this.tagCtx.props.countLineClamp:"initial";const i=document.createElement("div");i.classList.add("collapsible__bottom"),e.insertAdjacentElement("afterend",i),this.$content=e,this.model={needToggle:!1,useGradient:this.tagCtx.props.useGradient,isCollapsed:!0,collapsedMsg:this.tagCtx.props.collapsedMsg,unCollapsedMsg:this.tagCtx.props.unCollapsedMsg,btnClass:this.tagCtx.props.btnClass,nameForWba:this.tagCtx.props.nameForWba,toggleCollapse(e,t){$.observable(this).setProperty({isCollapsed:e});const i=document.querySelector(s);i.style.maxHeight=e?l+"px":"none",i.style.webkitLineClamp=e&&o?o:"initial"}},$.templates.collapsibleBlockTemplate.link(i,this.model),window.addEventListener("inPlaceFullUpdate",this.reset),window.addEventListener("resize",this.recalc),t>this.tagCtx.props.maxCollapsedHeight&&$.observable(this.model).setProperty({needToggle:!0})})},setValue:function(){this.$content&&(this.$content.style.maxHeight=this.tagCtx.props.maxCollapsedHeight+"px"),this.$content&&(this.$content.style.webkitLineClamp=this.tagCtx.props.countLineClamp?this.tagCtx.props.countLineClamp:"initial")},unBind(){window.removeEventListener("inPlaceFullUpdate",this.reset),window.removeEventListener("resize",this.recalc)},reset(){$.observable(this.model).setProperty({needToggle:!1,isCollapsed:!0}),this.ctx.root.$helper.nextTick().then(()=>{const e=document.querySelector(this.tagCtx.props.itemSelector);e&&e.scrollHeight>this.tagCtx.props.maxCollapsedHeight&&(e.style.maxHeight=this.tagCtx.props.maxCollapsedHeight+"px",e.style.webkitLineClamp=this.tagCtx.props.countLineClamp?this.tagCtx.props.countLineClamp:"initial",$.observable(this.model).setProperty({needToggle:!0}))})},recalc(){const e=document.querySelector(this.tagCtx.props.itemSelector);if(null==e||!document.documentElement.contains(e))return;if(!this.model.isCollapsed)return;const t=e.scrollHeight;t>=this.tagCtx.props.maxCollapsedHeight&&!this.model.needToggle?$.observable(this.model).setProperty({needToggle:!0}):this.model.needToggle&&t<this.tagCtx.props.maxCollapsedHeight&&$.observable(this.model).setProperty({needToggle:!1})}}});

},{}]},{},[1]);
