(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}!function(){let e=function(){function e(e,t,r,i,o){var n;this.id=this.$generateGuid(),this.parentId=e,this.nmId=t.nmId,this.colorName=t.colorName,this.showSize=t.showSize,this.nomenclatures=null!==(n=null==r?void 0:r.nomenclatures)&&void 0!==n?n:[],this.adult=t.adult,this.targetInfo=i,this.product=r,this.isPopup=o}var t=e.prototype;return t.init=function(){return this},t.destroy=function(){var e;return null===(e=this.swiper)||void 0===e||e.destroy(),this.nomenclatures.forEach(e=>{var t;return null===(t=e.miniCarousel)||void 0===t?void 0:t.stop()}),this},t.startModule=async function(){this._initColorsCarousel()},t.onColorChanged=function(e){const{sourceId:t,sourceNmId:r,selectedNomenclature:i}=e.detail;t==this.parentId&&r==this.nmId&&$.observable(this).setProperty({nmId:i.nmId,colorName:i.colorName,showSize:i.showSize,adult:i.adult})},t.onProductChanged=async function(e){var t;const{isDetailsLoaded:r,sourceId:i,sourceNmId:o,selectedNomenclature:n,product:s,targetInfo:a}=e.detail;i==this.parentId&&this.nmId==o&&($.observable(this).setProperty({colorName:n.colorName}),this.nmId===n.nmId&&r&&1===s.nomenclatures.length||(this.nomenclatures.forEach(e=>{var t;return null===(t=e.miniCarousel)||void 0===t?void 0:t.stop()}),$.observable(this).setProperty({nmId:n.nmId,showSize:n.showSize,adult:n.adult,targetInfo:a}),$.observable(this.nomenclatures).refresh(null!==(t=s.nomenclatures)&&void 0!==t?t:[]),this.product=s,await this.$helper.nextTick(),window.requestAnimationFrame(()=>{var e,t;null===(e=this.swiper)||void 0===e||e.update(),null===(t=this.swiper)||void 0===t||t.slideTo(0,0)})))},t._initColorsCarousel=function(){const e=document.getElementById(this.id);e&&(this.swiper=new Swiper(e,{slidesPerView:"auto",spaceBetween:8,watchOverflow:!0,updateOnWindowResize:!0,navigation:{nextEl:e.parentNode.querySelector(".swiper-button-next"),prevEl:e.parentNode.querySelector(".swiper-button-prev"),disabledClass:"disabled",lockClass:"hide"},on:{init:()=>{e.classList.remove("carousel-opacity")}}}))},t.updateNomenclature=function(e){const{data:t}=$.view(e.currentTarget);null==e||e.preventDefault(),null==e||e.stopPropagation(),null==e||e.stopImmediatePropagation(),t&&this.nmId!==t.nmId&&this.$adult.proceedIfAdultConfirmed(t.adult,this._updateNomenclature,this,t,!1,e)},t.showMiniCarousel=function(e){const t=e.currentTarget,{data:r}=$.view(t);if(!r||r.adult&&!this.$adult.isConfirmed)return;let i;(i=r.miniCarousel?Promise.resolve(r.miniCarousel):this.$moduleLoader.loadModuleAsync("miniCardCarousel").then(e=>{if(r.miniCarousel)return Promise.resolve(r.miniCarousel);const t=new e({adult:r.adult,nmId:r.nmId,sizes:r.sizes.map(e=>({unavailable:e.isSoldOut,ch:e.characteristicId,nm:e.sizeName})),woSize:!this.showSize,brand:r.brandName,name:r.goodsName,soldOut:r.price.soldOut,enabledForRegion:r.price.enabledForRegion,priceDiff:r.price.priceDiff,salePrice:r.price.salePrice,price:r.price.price,pics:r.picsCount});return $.observable(r).setProperty({miniCarousel:t}),Promise.resolve(r.miniCarousel)})).then(i=>{t.matches(":hover")&&(null==i?void 0:i.positionAt(e.currentTarget))&&this.nomenclatures.forEach(e=>{var t;return e!=r&&(null===(t=e.miniCarousel)||void 0===t?void 0:t.stop())})})},t.hideMiniCarousel=function(e){var t;const{data:r}=$.view(e.currentTarget);r&&(null===(t=r.miniCarousel)||void 0===t||t.stop())},t._updateNomenclature=async function(e){const t=await this.$services.productCard.loadNomenclature(e),r={sourceId:this.parentId,sourceNmId:this.nmId,selectedNomenclature:t};this.$eventBus.dispatchEvent(new CustomEvent("ProductColorChanged",{detail:r}))},_createClass(e,[{key:"template",get:function(){return e.template}}]),e}();window.__spaModuleManager__.register("productCardColors",e)}();

},{}]},{},[1]);
