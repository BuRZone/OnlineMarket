(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";const FilteredMessagesWrapper=require("./filteredMessagesWrapper"),ChatError=require("./chatError");let MimeType=function(e="",t,{isImage:r=!0}={}){this.mime=e,this.extensions=[].concat(t),this.isImage=r};const jpgMime=new MimeType("image/jpg",["jpg","jpeg"]),SUPPORTED_MIMES=Object.freeze({ffd8ffe0:jpgMime,ffd8ffe1:jpgMime,ffd8ffe2:jpgMime,ffd8ffe3:jpgMime,ffd8ffe8:jpgMime,"89504e47":new MimeType("image/png","png"),25504446:new MimeType("application/pdf","pdf",{isImage:!1})}),MAX_FILE_SIZE=10485760;let BaseOnlineChat=function(){function e(){this.unreadCount=0,this.uploading=!1,this.uploadingImg=!1,this.tooltipTag=!!$.views.tags.tooltip,this.history=[],this.onSubmit=this.onSubmit.bind(this),this.onFileChange=this.onFileChange.bind(this),this.beginSearch=this.$helper.debounce(this.beginSearch.bind(this),500),this.lastMessage.depends="history.length",$.observe(this,"history.length","maxSeen",(e,t)=>{let r=0;if(this.maxSeen&&!Number.isNaN(this.maxSeen))for(const e of this.reverseHistory()){if(+e.dt<=this.maxSeen)break;e.inbox&&r++}$.observable(this).setProperty({unreadCount:r})}),this.foundPatterns=[],this.searchIndex=0,this.maxSeen=0;const e=()=>new FilteredMessagesWrapper([...this.reverseHistory()],this.ctx);Object.defineProperty(this,"filteredWrapper",{get(){const t=e();return Object.defineProperty(this,"filteredWrapper",{value:t,writable:!0,configurable:!0}),t},configurable:!0,enumerable:!0}),$.observe(this,"history.length",(t,r)=>$.observable(this).setProperty({filteredWrapper:e()}))}var t=e.prototype;return t.imgCounter=function(){return{counter:0}},t.reverseHistory=function*(){for(let e=this.history.length-1;e>=0;e--)yield this.history[e]},t.init=function(e,t){return this.chat=t,this},t.stopChat=function(){this.currentPoll&&this.currentPoll.abort(),clearTimeout(this.pollId),this.currentPoll=null},t.scrollToBottom=function(){var e;const t=null===(e=this.chat)||void 0===e?void 0:e.querySelector(".j-chat-body");t&&(t.scrollTop=t.scrollHeight-t.clientHeight)},t.visit=function({dt:e,observe:t}){t?$.observable(this).setProperty({maxSeen:+e}):this.maxSeen=+e,this.storageService.updateMaxSeen({chatID:this.chatId,ts:+e})},t.sendMessage=async function(e){return{}},t.sendFile=async function(){},t.lastMessage=function(){return this.history[this.history.length-1]},t.onInput=function(e){e.target.style.height="auto";const t=e.target.scrollHeight;e.target.style.height=t+"px"},t.onSubmit=function(){if(!this.text||0===this.text.trim().length)return!1;const e=$.views.helpers.stripHtml(this.text),t=document.querySelector(".j-chat-textarea");return this.chat.querySelector(".j-fake-for-focus").focus(),$.observable(this).setProperty({uploading:!0}),this.$helper.debounce(this.sendMessage(e).then(e=>{e?(this._refreshHistory([e]),this.visit({dt:+e.dt})):this.visit({dt:Date.now()}),$.observable(this).setProperty({text:""}),t.style.height="auto",$.observable(this).removeProperty("onTop")}).catch(e=>{console.error("[Online Chat]:",e);const t=e instanceof ChatError?e.message:"Ошибка при отправке сообщения";wb.popup.renderModalError(t)}).finally(()=>{$.observable(this).setProperty({uploading:!1}),t.focus()}),100),!1},t.onKeyPress=function(e,t){13!==e.which||e.shiftKey||(e.target.form.dispatchEvent(new Event("submit",{cancelable:!0})),e.preventDefault())},t.onFileChange=function(e){$.observable(this).setProperty({uploading:!0});const t=e.currentTarget,r=t.files[0];return t.value="",this._onFileChangeAsync(r).then(e=>$.observable(this).removeProperty("onTop")).finally(e=>{$.observable(this).setProperty({uploading:!1,uploadingImg:!1})})},t.highlight=function(){var e;const t=this.parentElem||(null===(e=this.tag)||void 0===e?void 0:e.parentElem);t&&(t.classList.remove("blinking"),t.scrollIntoView({behavior:"smooth"}),t.classList.add("blinking"))},t.unhighlight=function(e){e.target.classList.remove("blinking")},t.setSearching=function(e,t){$.observable(this).setProperty("searching",!0),$.observable(this).setProperty("searchingComplete",!1)},t.onSearchEnter=function(e,t){var r;return"Enter"==e.key&&(!!(this.searchingComplete||null!==(r=this.foundPatterns)&&void 0!==r&&r.length)&&void this.goNextSearch())},t.beginSearch=function(e,t){var r;const s=[];$.observable(this.foundPatterns,s).refresh([]),$.observable(this,s).setProperty("searchIndex",0);const i=null===(r=e.target.value)||void 0===r?void 0:r.trim().replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");if(i&&/[\wА-Яа-я]/.test(i)){const e=new RegExp(i,"ig");let t=0;for(const r of this.history)r.text&&e.test(r.text)?($.observable(r,s).setProperty("foundText",$.views.helpers.stripHtml(r.text).replace(e,e=>`<span class="message__text-highlited">${e}</span>`)),$.observable(this.foundPatterns,s).insert(t)):$.observable(r,s).removeProperty("foundText"),t++;$.observable(this).setProperty("searchingComplete",!0),this.ctx.sendAnalytics("Purchases_Chat_Search_Send")}else{for(const e of this.history)$.observable(e,s).removeProperty("foundText");e.target.value||$.observable(this).setProperty("searchingComplete",!1)}s.trigger(),$.observable(this).setProperty("searching",!1)},t.clearSearch=function(e,t){e.stopPropagation();const r=[];$.observable(t.view.root.data,r).setProperty("searchText",""),$.observable(this.foundPatterns,r).refresh([]),$.observable(this,r).setProperty("searchIndex",0);for(const e of this.history)$.observable(e,r).removeProperty("foundText");r.trigger(),$.observable(this).setProperty("searchingComplete",!1)},t.goPrevSearch=function(e){const t=this.searchIndex<=1?this.foundPatterns.length:this.searchIndex-1;1==this.searchIndex&&1==t&&$.observable(this).removeProperty("searchIndex"),$.observable(this).setProperty("searchIndex",t)},t.goNextSearch=function(e){const t=this.searchIndex>=this.foundPatterns.length?1:this.searchIndex+1;1==this.searchIndex&&1==t&&$.observable(this).removeProperty("searchIndex"),$.observable(this).setProperty("searchIndex",t)},t.isEmpty=function(e){return!e||""===e.trim()},t.downloadAttachment=function(e,t){$.view(e.target).data.download(e,t)},t._refreshHistory=function(e){Array.isArray(e)&&0!=e.length&&($.observable(this.history).insert(e),this.scrollToBottom())},t._onFileChangeAsync=async function(e){try{const{supported:t,isImg:r}=await this._getFileInfo(e);if(!t)return void wb.popup.renderModalError("Файл не поддерживается");if(this.ctx.chat.dispatchEvent(new CustomEvent("sellerChat_upload",{detail:{type:r?"media":"file",quantity:1}})),e.size>=10485760)return void wb.popup.renderModalError("Слишком большой файл");r&&($.observable(this).setProperty({uploadingImg:!0}),this.scrollToBottom());const s=await this.sendFile(e,r);s&&(this._refreshHistory([s]),this.visit({dt:+s.dt}))}catch(e){console.error(e),wb.popup.renderModalError("Не удалось отправить сообщение")}},t._getFileInfo=async function(e){const t=await this.$moduleLoader.loadModuleAsync("promisifiedFileReader"),r=await(new t).readAsArrayBuffer(e.slice(0,4)),s=new Uint8Array(r).reduce((e,t)=>e+t.toString(16),""),i=wb.helpers.path.extension(e.name),o=SUPPORTED_MIMES[s];return null!=o&&o.extensions.includes(i)?{supported:!0,isImg:o.isImage}:{supported:!1}},e}();module.exports=BaseOnlineChat;

},{"./chatError":3,"./filteredMessagesWrapper":5}],2:[function(require,module,exports){
"use strict";let ChatAttachment=function(){function t({ctx:t,message:e,attachment:n,messageIndex:a,attachmentIndex:o,imgCounter:i}){this.parentIndex=a,this.index=o;const{url:s,name:r,size:c}=n;this.url=s,this.name=r,this.size=c,null!=e&&e.dt&&(this.dt=e.dt),this.ctx=t,this.imgCounter=i}var e=t.prototype;return e.goToMessage=function(t,e){if(t.preventDefault(),t.stopPropagation(),Number.isInteger(this.parentIndex)){$.observable(this.ctx).setProperty({isTabsOpen:!1}),this.ctx.closeSlider();const t=this.ctx.chat.querySelector(`.chat__message:nth-last-of-type(${this.parentIndex})`);t&&t.scrollIntoView()}},e.download=function(t,e){if(t.preventDefault(),!this.url)return;window.navigator&&window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(blob,data.fileName);const n=(t,e)=>{const n=document.createElement("a");n.href=t,n.download=this.name||wb.helpers.path.fileName(this.url),n.onclick=(t=>t.stopPropagation()),n.target="_blank",document.body.appendChild(n),n.click(),setTimeout(()=>{document.body.removeChild(n),e&&URL.revokeObjectURL(t)},200)};return fetch(this.url).then(async t=>{const e=await t.blob();if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,data.fileName);else{const t=URL.createObjectURL(e);n(t,!0)}}).catch(()=>n(this.url,!1)),!1},t}();module.exports=ChatAttachment;

},{}],3:[function(require,module,exports){
"use strict";function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_setPrototypeOf(t,e)}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,t)})(t)}function _construct(t,e,r){return(_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(t,e,r){var o=[null];o.push.apply(o,e);var n=new(Function.bind.apply(t,o));return r&&_setPrototypeOf(n,r.prototype),n}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let ChatError=function(t){function e(e){return t.call(this,e)||this}return _inheritsLoose(e,t),e}(_wrapNativeSuper(Error));module.exports=ChatError;

},{}],4:[function(require,module,exports){
"use strict";const URL_REGEX=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,ChatAttachment=require("./chatAttachment");let ChatMessage=function(){function t({id:t,chatId:e,text:i="",dt:a=new Date,inbox:s=!1,attachments:n,isRatingRequest:h}){t&&(this.id=t),e&&(this.chatId=e),this.text=i,this.dt=new Date(a),this.inbox=s,n&&(this.attachments=n),h&&(this.isRatingRequest=!0)}var e=t.prototype;return e.hasFile=function(){var t;return(null===(t=this.attachments)||void 0===t||null===(t=t.files)||void 0===t?void 0:t.length)>0},e.hasImage=function(){var t;return(null===(t=this.attachments)||void 0===t||null===(t=t.images)||void 0===t?void 0:t.length)>0},e.hasUrl=function(){var t;return(null===(t=this.attachments)||void 0===t||null===(t=t.urls)||void 0===t?void 0:t.length)>0},e.images=function(t){var e;return null===(e=this.attachments)||void 0===e?void 0:e.images.map(e=>new ChatAttachment({message:this,attachment:e,imgCounter:t,attachmentIndex:t.counter++}))},e.files=function(){var t;return null===(t=this.attachments)||void 0===t?void 0:t.files.map(t=>new ChatAttachment({attachment:t}))},e.urls=function(){var t;return null===(t=this.attachments)||void 0===t?void 0:t.urls.map(t=>new ChatAttachment({attachment:t}))},e.setSender=function({id:t,name:e}){return t||e?(this.sender={id:t,name:e},this):this},e.addImage=function({url:t,name:e,size:i,type:a,date:s}){return t?(this.attachments||(this.attachments={}),this.attachments.images||(this.attachments.images=[]),this.attachments.images.push({url:t,name:e,size:i,type:a,date:s}),this):this},e.addFile=function({url:t,name:e,size:i,type:a,date:s}){return t?(this.attachments||(this.attachments={}),this.attachments.images||(this.attachments.files=[]),this.attachments.files.push({url:t,name:e,size:i,type:a,date:s}),this):this},e.tryLinkify=function(){return this.text?(this.text=this.text.replace(URL_REGEX,t=>(this.attachments||(this.attachments={}),this.attachments.urls||(this.attachments.urls=[]),this.attachments.urls.push({url:t}),"")),this):this},t.createFromWbChat=function({message_id:t,msg_text:e,image_url:i,file_url:a,dt:s,is_inside:n,employee_id:h,employee_first_name:r,message_type_id:m}={}){return new this({id:t,text:e,dt:s,inbox:n,isRatingRequest:2==m}).addFile({url:a}).addImage({url:i}).setSender({id:h,name:r}).tryLinkify()},t.createFromEvent=function(t){var e,i,a;return new this({chatId:t.chatID,text:null===(e=t.message)||void 0===e?void 0:e.text,attachments:Object.assign({},null===(i=t.message)||void 0===i?void 0:i.attachments),dt:new Date(t.addTime||t.clientCreatedAt),inbox:"seller"==(null===(a=t.sender)||void 0===a?void 0:a.type)}).tryLinkify()},t}();module.exports=ChatMessage;

},{"./chatAttachment":2}],5:[function(require,module,exports){
"use strict";const ChatAttachment=require("./chatAttachment");let FilteredMessagesWrapper=function(){function e(e,t){function s(e,t,s){let r=e.get(t);r||(r=[],e.set(t,r)),r.push(s)}this.groupedFiles=new Map,this.groupedImages=new Map,this.groupedLinks=new Map,this.images=[],this.ctx=t;const r=new Map;[...e].forEach((e,t)=>{const n=`${e.dt.getFullYear()}-${e.dt.getMonth()}`;let i=r.get(n);i||((i=new Date(e.dt)).setHours(0,0,0,0),i.setDate(1),r.set(n,i));const a=t+1;e.hasFile()&&s(this.groupedFiles,i,{message:e,reverseIndex:a}),e.hasImage()&&(s(this.groupedImages,i,{message:e,reverseIndex:a}),this.images.push({message:e,reverseIndex:a})),e.hasUrl()&&s(this.groupedLinks,i,{message:e,reverseIndex:a})})}var t=e.prototype;return t.get=function(e="m"){return[...this._get(e)]},t.getImages=function(){return[...this._getAttachments(this.images,"m")]},t.isNotEmpty=function(){return this.groupedFiles.size+this.groupedImages.size+this.groupedLinks.size>0},t._getAttachments=function*(e,t){let s=0;let r={m:"images",d:"files",l:"urls"}[t];for(const{message:t,reverseIndex:n}of e){const e=t.attachments[r];for(const i of[...this._reverseArray(e)])yield new ChatAttachment({message:t,attachment:i,messageIndex:n,attachmentIndex:s++,ctx:this.ctx,attachmentType:r})}},t._reverseArray=function*(e){for(let t=e.length-1;t>=0;t--)yield e[t]},t._get=function*(e){if("m"!=e&&"d"!=e&&"l"!=e)throw new Error("wrong filter");const t={m:this.groupedImages,d:this.groupedFiles,l:this.groupedLinks};for(const[s,r]of t[e])yield{dt:s,attachments:[...this._getAttachments(r,e)]}},e}();module.exports=FilteredMessagesWrapper;

},{"./chatAttachment":2}],6:[function(require,module,exports){
"use strict";function _defineProperties(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey(i.key),i)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==typeof e?e:String(e)}function _toPrimitive(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}!function(){const t=require("../../services/chat/supportChatService.js"),e=require("./baseOnlineChat.js"),r=require("./chatMessage");let i=function(e){function i(r,i,{ctx:n,storageService:s}){var o;return(o=e.call(this)||this).ctx=n,o.storageService=s,o.isAuth=r,o.uid=i,o.chatService=new t(r,i),o.needPoll=!0,o.chatId="wb",o.name="wb",o.title="Поддержка Wildberries",o.currentPoll=null,o.pollId=null,o._longPoll=o._longPoll.bind(_assertThisInitialized(o)),o.wb=!0,o}_inheritsLoose(i,e);var n=i.prototype;return n.initAsync=async function(){try{const t=await this.chatService.getHistoryAsync().then(t=>t.map(t=>r.createFromWbChat(t)));return this.history.push(...t),this._longPoll(),!0}catch(t){return console.error(t),!1}},n.refreshAsync=async function(){$.observable(this.history).refresh([]),this.stopChat();const t=await this.chatService.getHistoryAsync().then(t=>t.map(t=>r.createFromWbChat(t)));$.observable(this.history).refresh(t||[]),this.scrollToBottom(),this._longPoll()},n.sendRating=async function(t){const e=$.view(t.target),r=e.ctxPrm("message");if(r.rating)return!1;const i=e.data;if(!i||i>5)return!1;const{message_id:n}=await this.chatService.sendRating(i).then(t=>t.json()).catch(()=>null)||{};if(!n)return wb.popup.renderModalError("Не удалось отправить оценку"),!1;$.observable(r).setProperty({rating:i})},n.sendMessage=async function(t){const{message_id:e}=await this.chatService.sendMessage({msg_text:t}).then(t=>t.json())||{};if(!e)throw new Error("Не удалось отправить сообщение");return this.currentPoll?null:(this.pollId=setTimeout(this._longPoll,100),new r({id:e,text:t,inbox:!1}))},n.sendFile=async function(t,e){const i={},{url:n}=await this.chatService.sendFile(t)||{};if(!n)throw new Error("Не удалось отправить сообщение");i[e?"image_url":"file_url"]=n;const{message_id:s}=await this.chatService.sendMessage(i).then(t=>t.json())||{};if(!s)throw new Error("Не удалось отправить сообщение");return this.currentPoll?null:(this.pollId=setTimeout(this._longPoll,100),new r({id:s}).addFile({url:i.file_url}).addImage({url:i.image_url}))},n._longPoll=async function(){if(this.history.length>0){this.currentPoll=new AbortController;try{var t,e;const i=await this.chatService.getHistoryAsync({message_id:(null===(t=this.lastMessage())||void 0===t?void 0:t.id)+1,lp:!0,delay:50},{signal:this.currentPoll.signal}).then(t=>t.map(t=>r.createFromWbChat(t)));this._refreshHistory(i),i.length>0&&(null===(e=this.lastMessage())||void 0===e?void 0:e.inbox)&&(this.chat.isVisible()?this.visit({dt:+this.lastMessage().dt,observe:!0}):this.$eventBus.dispatchEvent(new CustomEvent("OnlineChatShowUnread"))),this.pollId=setTimeout(this._longPoll.bind(this),100)}catch(t){if("AbortError"!==t.name)throw t}}},_createClass(i,[{key:"template",get:function(){return i.template}}]),i}(e);window.__spaModuleManager__.register("onlineChat",i)}();

},{"../../services/chat/supportChatService.js":7,"./baseOnlineChat.js":1,"./chatMessage":4}],7:[function(require,module,exports){
"use strict";function _defineProperties(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey(i.key),i)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==typeof e?e:String(e)}function _toPrimitive(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}let SupportChatService=function(){function t(t,e){this.isAuth=t,this.uid=e,this.baseUrl="by"==wb.settings.currentLocale?"https://chat-prod.wildberries.by":"https://chat-prod.wildberries.ru"}var e=t.prototype;return e.reinit=function(t,e){this.isAuth=t,this.uid=e},e.getHistoryAsync=function(t,{signal:e}={}){const r=new URL(this.getMessagesUrl);return t&&(r.search=new URLSearchParams(t).toString()),fetch(r.toString(),Object.assign({signal:e},this._requestOptions)).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)})},e.sendMessage=function(t){return fetch(this.sendMessageUrl,Object.assign({method:"POST",body:JSON.stringify(t)},this._requestOptions))},e.sendRating=function(t){return fetch(this.getRateUrl(t),this._requestOptions)},e.sendFile=function(t){let e=new FormData;return e.append("file",t),fetch(this.fileUploadUrl,Object.assign({method:"POST",processData:!1,body:e},this._requestOptions)).then(t=>{if(t.ok)return t.json();throw new Error("Не удалось загрузить файл")})},e._getEndpoint=function(){return`api/support/${this.isAuth?"v2/client":"v1/unauth"}`},e.getRateUrl=function(t){return`${this.baseUrl}/${this._getEndpoint()}/rate?mark=${t}`},_createClass(t,[{key:"getMessagesUrl",get:function(){return`${this.baseUrl}/${this._getEndpoint()}/messages`}},{key:"sendMessageUrl",get:function(){return`${this.baseUrl}/${this._getEndpoint()}/send`}},{key:"fileUploadUrl",get:function(){return`${this.baseUrl}/${this._getEndpoint()}/upload`}},{key:"_requestOptions",get:function(){const t=new Headers({locale:wb.settings.currentLocale});WbSpaModel.prototype.$wbxHttpClient.jwt&&t.set("Authorization",`Bearer ${WbSpaModel.prototype.$wbxHttpClient.jwt}`);const e={credentials:this.isAuth?"include":"omit",cache:"no-cache",headers:t};return this.isAuth||e.headers.set("BasketUID",this.uid),e}}]),t}();module.exports=SupportChatService;

},{}]},{},[6]);
