(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let CategoryDenyLinkCatalog=function(e){function t({model:t}){var o;return(o=e.call(this)||this).title=t.title,o.catalogMenu=t.catalogMenu,o}_inheritsLoose(t,e);var o=t.prototype;return o.onBeforeRender=async function(e){const[t,o]=await Promise.all([this.$moduleLoader.loadModuleAsync("catalogCore"),this.$moduleLoader.loadModuleAsync("catalogSitePath")]);this.mobileMenu=t.CatalogPanel.CatalogPanelMobile.createPanelMenu(e.rootMenuItem,e.currentMenuItem),this.gridList=t.createGridList(e.children),this.gridMenu=t.createGridMenu(e.catalogPromoLeftMenu),this.sitePathModel=new o(e.sitePathItems)},o.updateActiveLevel=async function(){var e;const t=this.catalogMenu.menuByUrl.get(window.location.pathname),o=this.catalogMenu.getSitePathItems(t),r={currentMenuItem:t,rootMenuItem:this.catalogMenu.getRootNode(t),sitePathItems:o,title:null!==(e=t.seo)&&void 0!==e?e:t.name,children:t.childs,catalogPromoLeftMenu:this.catalogMenu.getCatalogDenyMenu(t,o)};this.update({model:r})},o.update=function({model:e}){window.requestAnimationFrame(()=>{$.observable(this).setProperty({title:e.title})}),this.sitePathModel.update(e.sitePathItems),this.gridList.update(e.children),this.gridMenu.update(e.catalogPromoLeftMenu),this.mobileMenu.update(e.rootMenuItem,e.currentMenuItem)},o.canUpdate=function(e){const t=this.catalogMenu.menuByUrl.get(e);return null!=t&&t.isDenyLink},_createClass(t,[{key:"template",get:function(){return $.views.templates.categoryDenyLinkCatalog}}]),t}(WbSpaModel);module.exports=CategoryDenyLinkCatalog;

},{}],2:[function(require,module,exports){
"use strict";function _defineProperties(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_toPropertyKey(a.key),a)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let CategoryGoodsCatalog=function(e){function t({model:t,type:o,menuId:a}){var r;return(r=e.call(this)||this).title=t.title,r.containerClass=t.containerClass,r.menuId=a,r.needAdultProtection=t.needAdultProtection,r.catalogType=o,r.metaTags=t.metaTags,r.emptyCatalog=!1,r.onEmptyGoodsList=r.onEmptyGoodsList.bind(_assertThisInitialized(r)),r}_inheritsLoose(t,e);var o=t.prototype;return o.onBeforeRender=async function(e,t){window._debug&&console.time("loadModules");const[o,a,r,i,{XCatalogData:s},{CatalogSorterModel:n}]=await Promise.all([this.$moduleLoader.loadModuleAsync("catalogCore"),this.$moduleLoader.loadModuleAsync("xCatalogProvider"),this.$moduleLoader.loadModuleAsync("catalogSitePath"),this.$moduleLoader.loadModuleAsync("queryHelper"),this.$moduleLoader.loadModuleAsync("xCatalogData"),this.$moduleLoader.loadModuleAsync("sorterModel")]);window._debug&&console.timeEnd("loadModules");const l=Number.tryParseInt(window.location.hash.slice(2)),d=i.getInitialParams(),{page:u,sort:c=n.getSortFromCookie,cardsize:h,...g}=d,y=new s(e.xData.xcatalogQuery,e.xData.xcatalogShard,"Catalog",this._getCatalogTypeInfoWba(e.currentMenuItem)),p=new i({sort:c,page:u,filters:g,cardsize:h},this.baseCatalogState),m=i.checkOnlyFilterParams(g);e.sorterModel.sortingBase||(e.sorterModel=new n(e.sorterModel.value,e.sorterModel.baseUrl));const M=a.createGoodsProvider(y),v=a.createFiltresProvider(y),f=a.createAdvertProvider({menuId:e.menuId}),C=new o.FiltresSettings(e.selectedHasChild),b=o.createAnalytics(y,p,this.catalogType,u,c).init(),P=o.createStatistic(this.catalogType,y,p,n,u,c,h,e.menuId).init(),S=o.createSorter(e.sorterModel,p).init(),w=o.createSizePicker(h,window.location.href,p),_=o.createPager(null!=u?u:1,p).init(),I=o.createAdvertGoods(p,S).setProvider(f).init(),T=o.createGoodsLoader(p).setProvider(M).init(),L=o.cteateCatalogFiltres(p,y,C).setProvider(v).init(m),$=o.createSearchTags(this.catalogType,e.tagsUrl).init(),E=o.createCatalogPanel().init(),A=E.creatYourChoiceModel(m,p).init();E.addDesktopPanel().addMenuModel(e.rootMenuItem,e.currentMenuItem).addSorterModel(S).addFiltresModel(v).addCardSizeModel(w).addYourChoiceModel(A),E.addMobilePanel().addMenuModel(e.rootMenuItem,e.currentMenuItem).addSorterModel(S).addFiltresModel(v).addCardSizeModel(w).addYourChoiceModel(A),this.queryHelper=p,this.goodsList=o.createGoodsList(e.products,l,this.queryHelper,!0).init(t),this.sizerModel=w,this.pagerModel=_,this.filtresModel=L,this.sitePathModel=new r(e.sitePathItems).init(),this.catalogLoader=T,this.advertModel=I,this.panelModel=E,this.sorterModel=S,this.searchTagsModel=$,this.analyticsModel=b,this.statisticModel=P,this.emptyCatalog=0==e.products.length&&0==this.queryHelper.getFiltersQuery().toString().length},o.onAfterRender=function(e){this._bindEvents(),this.$router.replaceState({catalogState:this.catalogState},document.title,window.location.href),this.analyticsModel.sendScreenEvent(),this.quickNavDestroyer=wb.quickNav({bottomPx:document.documentElement.clientHeight}),this._loadMetaTags()},o.onBeforeUnrender=function(){var e,t,o,a,r,i,s,n,l,d,u,c,h;this._unbindEvents(),null===(e=this.goodsList)||void 0===e||e.destroy(),null===(t=this.pagerModel)||void 0===t||t.destroy(),null===(o=this.filtresModel)||void 0===o||o.destroy(),null===(a=this.catalogLoader)||void 0===a||a.destroy(),null===(r=this.advertModel)||void 0===r||r.destroy(),null===(i=this.panelModel)||void 0===i||i.destroy(),null===(s=this.sorterModel)||void 0===s||s.destroy(),null===(n=this.searchTagsModel)||void 0===n||n.destroy(),null===(l=this.sitePathModel)||void 0===l||l.destroy(),null===(d=this.analyticsModel)||void 0===d||d.destroy(),null===(u=this.statisticModel)||void 0===u||u.destroy(),null===(c=this.searchTagsModel)||void 0===c||c.destroy(),null===(h=this.quickNavDestroyer)||void 0===h||h.call(this)},o.onHistoryChange=function(e,t){const o=this.queryHelper.checkChanges(e.catalogState);if(o.needChangeCardSize){const t=this.sizerModel.getCardSizeByName(e.catalogState.cardSize);this.sizerModel.update(t)}if(o.needUpdateSort){const t=this.sorterModel.getSortByName(e.catalogState.sort);this.sorterModel.update(t)}o.needUpdatePage&&this.pagerModel.update(e.catalogState.page||1),o.needUpdateFilters&&this.filtresModel.update(e.catalogState.filters),(o.needUpdateCatalog||t)&&this.$eventBus.dispatchEvent(new CustomEvent("CatalogQueryUpdated",{detail:{}}))},o.update=async function({model:e}){if(!e.sorterModel.sortingBase){const{CatalogSorterModel:t}=await this.$moduleLoader.loadModuleAsync("sorterModel");e.sorterModel=new t(e.sorterModel.value,e.sorterModel.baseUrl)}if(!e.xData.dataUrlFilters){const{XCatalogData:t}=await this.$moduleLoader.loadModuleAsync("xCatalogData");e.xData=new t(e.xData.xcatalogQuery,e.xData.xcatalogShard,"Catalog",this._getCatalogTypeInfoWba(e.currentMenuItem))}$.observable(this).setProperty({title:e.title,menuId:e.menuId,needAdultProtection:e.needAdultProtection}),this.metaTags=e.metaTags;const t=this.queryHelper.getInitialParams(),{page:o,sort:a=this.sorterModel.getSortFromCookie,cardsize:r,...i}=t;this.queryHelper.updateModel({page:o,sort:a,cardsize:r,filters:i},this.baseCatalogState),$.observable(this).setProperty({emptyCatalog:0==e.products.length&&0==this.queryHelper.getFiltersQuery().toString().length}),this.$router.replaceState({catalogState:this.catalogState},document.title,window.location.href),this.$eventBus.dispatchEvent(new CustomEvent("CatalogUpdated",{detail:{...e,advertQueryDictionary:{menuId:this.menuId}}})),this.analyticsModel.sendScreenEvent(),this._loadMetaTags()},o.onEmptyGoodsList=function(e){window.requestAnimationFrame(()=>{$.observable(this).setProperty({emptyCatalog:0==this.queryHelper.getFiltersQuery().toString().length})})},o._getCatalogTypeInfoWba=function(e){var t;return this.$router.queryParams.has("bid")?{type:"Banner",val:this.$router.queryParams.get("bid")}:{type:"Catalog",val:null==e?void 0:e.id,extraInfo:{parentId:null!==(t=null==e?void 0:e.parentId)&&void 0!==t?t:0}}},o._loadMetaTags=async function(){if(this.metaTags)return this.$seoHelper.render(this.metaTags);const e=await this.$seoHelper.update(window.location.pathname,this.$router.currentRoute.metaTagsUrl);if(!e)return;const t=e.find(e=>"H1"===e.tagName);t&&window.requestAnimationFrame(()=>$.observable(this).setProperty({title:t.hTMLContent}))},o._bindEvents=function(){this.$eventBus.addEventListener("CatalogEmptyGoodsList",this.onEmptyGoodsList)},o._unbindEvents=function(){this.$eventBus.removeEventListener("CatalogEmptyGoodsList",this.onEmptyGoodsList)},_createClass(t,[{key:"template",get:function(){return $.views.templates.categoryGoodsCatalog}},{key:"baseCatalogState",get:function(){return{catalogType:this.catalogType,menuId:this.menuId}}},{key:"catalogState",get:function(){return{...this.baseCatalogState,...this.queryHelper.toState()}}}]),t}(WbSpaModel);module.exports=CategoryGoodsCatalog;

},{}],3:[function(require,module,exports){
"use strict";function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let CategoryMainCatalog=function(e){function t({mainVersion:t,menuId:o,metaTags:n}){var a;return(a=e.call(this)||this).mainVersion=t,a.menuId=o,a.metaTags=n,a}_inheritsLoose(t,e);var o=t.prototype;return o.onBeforeRender=async function(e,t){const o=await this._loadRequiredModel(e,t);this.currentModel=o},o.onAfterRender=function(e){var t,o;null===(t=this.currentModel)||void 0===t||null===(o=t.onAfterRender)||void 0===o||o.call(t),this.$adult.proceedIfAdultConfirmed(e.needAdultProtection),this._loadMetaTags()},o.onBeforeUnrender=function(){var e,t;null===(e=this.currentModel)||void 0===e||null===(t=e.onBeforeUnrender)||void 0===t||t.call(e)},o.update=async function(e){const t=this.mainVersion,o=this.menuId;if(this.menuId=e.model.menuId,this.mainVersion=e.mainVersion,this.metaTags=e.metaTags,6994!=this.menuId&&6994!=o&&784!=this.menuId&&784!=o&&t==this.mainVersion)this.currentModel.update(e.model);else{var n,a;const t=await this._loadRequiredModel(e.model);$.observable(this).setProperty({currentModel:t}),await this.$helper.nextTick(),null===(n=this.currentModel)||void 0===n||null===(a=n.onAfterRender)||void 0===a||a.call(n)}this._loadMetaTags(),this.$adult.proceedIfAdultConfirmed(e.model.needAdultProtection)},o._loadRequiredModel=async function(e,t){let o;return o=6994==e.menuId?this.loadAutoLanding(e):784==e.menuId?this._loadSportLanding(e,t):3==this.mainVersion?this._loadMainV3(e):this._loadPremiumLanding(e,t),await o},o._loadMainV3=async function(e){const[t,o,n,a]=await Promise.all([this.$moduleLoader.loadModuleAsync("mainCategoryV3"),this.$moduleLoader.loadModuleAsync("categoryMainLeftMenu"),this.$moduleLoader.loadModuleAsync("catalogSitePath"),this.$moduleLoader.loadModuleAsync("catalogBannersAndRecommendations")]),r=Array.from({length:3}).map((t,o)=>new a(e,o).init()),i=new n(e.sitePathItems),l=new o(e);return new t(e,l,i,r).init()},o._loadSportLanding=async function(e){const[t,o,n,a]=await Promise.all([this.$moduleLoader.loadModuleAsync("catalogMainSport"),this.$moduleLoader.loadModuleAsync("catalogTopBrands"),this.$moduleLoader.loadModuleAsync("catalogTopMenu"),this.$moduleLoader.loadModuleAsync("catalogMainSeasonBanners")]);return new t(e,o.createStaticTopBrands(e.topBrandsUrl).init(),new n(e),new a(e.bannersTask).init()).init()},o._loadPremiumLanding=async function(e,t){const[o,n,a]=await Promise.all([this.$moduleLoader.loadModuleAsync("catalogMainPremium"),this.$moduleLoader.loadModuleAsync("catalogTopBrands"),this.$moduleLoader.loadModuleAsync("catalogMainSeasonBanners")]);return new o(e,n.createStaticTopBrands(e.topBrandsUrl).init(),new a(e.bannersTask).init(t)).init()},o.loadAutoLanding=async function(e){const[t,o,n,a,r]=await Promise.all([this.$moduleLoader.loadModuleAsync("catalogMainAuto"),this.$moduleLoader.loadModuleAsync("categoryMainLeftMenu"),this.$moduleLoader.loadModuleAsync("catalogSitePath"),this.$moduleLoader.loadModuleAsync("catalogBannersAndRecommendations"),this._loadTecDoc()]),i=Array.from({length:3}).map((t,o)=>new a(e,o).init()),l=new n(e.sitePathItems),s=new o(e),d=null!=r?r.createTecDocViewModel(null,!0):null;return new t(e,s,l,i,d).init()},o._loadTecDoc=async function(){var e;if(wb.settings.isIE||null===(e=wb.global.settings.switches)||void 0===e||!e.tecDocEnable)return null;const t=await this.$moduleLoader.loadModuleAsync("tecDocAuto"),o=t.getTecDocService();try{return await o.tryInit()?t:null}catch(e){return console.error(e),null}},o._loadMetaTags=async function(){if(this.metaTags)return this.$seoHelper.render(this.metaTags);const e=await this.$seoHelper.update(window.location.pathname,this.$router.currentRoute.metaTagsUrl);if(!e)return;const t=e.find(e=>"H1"===e.tagName);t&&window.requestAnimationFrame(()=>$.observable(this).setProperty({title:t.hTMLContent}));const o=e.find(e=>"bottomText"===e.tagName);o&&window.requestAnimationFrame(()=>$.observable(this).setProperty({bottomText:o.hTMLContent}))},_createClass(t,[{key:"template",get:function(){return $.views.templates.categoryMainCatalog}}]),t}(WbSpaModel);module.exports=CategoryMainCatalog;

},{}],4:[function(require,module,exports){
"use strict";!function(){const e=require("./catalog_v2/category/categoryGoodsCatalog"),t=require("./catalog_v2/category/categoryMainCatalog"),o=require("./catalog_v2/category/categoryDenyLinkCatalog");let r=function(){function r(e){var t;const o=null!==(t=null==e?void 0:e.data)&&void 0!==t?t:e;this.mainVersion=o.mainVersion,this.type=o.type,this.model=o.model,this.menuId=this.model.menuId}var n=r.prototype;return n.onBeforeRender=async function(e,t){var o;const r=null!==(o=null==e?void 0:e.data)&&void 0!==o?o:e,n=this.getReqiredModel();$.observable(this).setProperty({currentModel:n}),await this.currentModel.onBeforeRender(r.model,t)},n.onAfterRender=function(e){var t,o,r;const n=null!==(t=null==e?void 0:e.data)&&void 0!==t?t:e;null===(o=(r=this.currentModel).onAfterRender)||void 0===o||o.call(r,n.model)},n.onBeforeUnrender=function(){var e,t;null===(e=(t=this.currentModel).onBeforeUnrender)||void 0===e||e.call(t)},n.onHistoryChange=function(e,t,o){if(12==this.type&&this.currentModel.canUpdate(window.location.pathname))return void this.currentModel.updateActiveLevel();const{catalogState:r}=e;(null==r?void 0:r.menuId)==this.menuId?this.currentModel.onHistoryChange(e,t,o):this._updateModel()},n.getReqiredModel=function(){switch(this.type){case 1:return new t(this);case 2:return new e(this);case 12:return new o(this)}},n._updateModel=async function(e){let t;try{t=await this.$router.loadRouteDataAsync(this.$router.currentRoute.requiredData,0,!1,e)}catch(e){if(e.isNotFound)return this.$router.moveTo404Async();if(!e.isCancelled&&!e.isUnauthorize&&null!=e.message&&""!=e.message)return console.log(e.message),this.$router.moveTo500Async(e,{method:"catalog._updateModel",current:window.location.toString(),requiredData:this.$router.currentRoute.requiredData})}try{var o,r,n,i,a,l,d;const{viewData:e}=t,{data:s}=e;this.$setGoogleTagsModel(null!==(o=s.model.googleTagParams)&&void 0!==o?o:this._fillGoogleTagsModel(s.type,s.model.sitePathItems)),this.$setActionPayRetargetingModel(null!==(r=s.model.actionPayRetargetingData)&&void 0!==r?r:this._fillActionPayRetargetingModel(s.type,s.model.currentMenuItem));const u=this.type;if(this.type=s.type,this.model=s.model,this.menuId=this.model.menuId,this.mainVersion=s.mainVersion,u==s.type)return void this.currentModel.update(s);const c=this.getReqiredModel();null===(n=(i=this.currentModel).onBeforeUnrender)||void 0===n||n.call(i);const h=new this.$helper.Deferred;await(null===(a=c.onBeforeRender)||void 0===a?void 0:a.call(c,s.model,h.promise)),$.observable(this).setProperty({currentModel:c}),await this.$helper.nextTick(),h.resolve(),null===(l=(d=this.currentModel).onAfterRender)||void 0===l||l.call(d,s.model)}catch(e){console.error(e),wb.popup.renderModalError(e)}},n._fillGoogleTagsModel=function(e,t){return 2==e&&t?{PageType:"category",Delivery:"Бесплатная доставка",Pcat:t.map(e=>e.name)}:null},n._fillActionPayRetargetingModel=function(e,t){if(2==e)return{pageType:3,currentCategory:{id:t.id,name:t.name}}},r}();wb.spa.registerViewModel(r)}();

},{"./catalog_v2/category/categoryDenyLinkCatalog":1,"./catalog_v2/category/categoryGoodsCatalog":2,"./catalog_v2/category/categoryMainCatalog":3}]},{},[4]);
