(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";!function(){const e="/webapi/personalinfo",s=WbSpaModel.prototype.$httpClient,o=WbSpaModel.prototype.$verificationTokenHelper;let t=function(){function t(){}return t.loadBasicInfo=async function(o,t){try{const r=await s.fetchJSON(`${e}`,{method:"POST"});$.observable(o).setAllProperty(r),o.maskedInfo=r.maskedInfo}catch(e){!e.isCancelled&&console.error(e),$.observable(o).setProperty({isAuthenticated:"0"!=WbSpaModel.prototype.$user.getId()}),t?$.observable(o).setProperty(t):$.observable(o).setProperty({inn:1,isUnknownUser:!0,userPhotoLink:"https://images.wbstatic.net/img/0/medium/PersonalPhoto.png",firstName:"Неизвестно",lastName:"Неизвестно"})}finally{return o}},t.loadExtraInfo=async function(o){try{const t=await WbSpaModel.prototype.$user.getWbxId(),r=await s.fetchJSON(`${e}/extrainfo`,{method:"POST"},{redirectUnauth:!0});if(t){const e=await WbSpaModel.prototype.$services.groupedDeliveriesService.getPurchaseInfo();r.discountInfo||(r.discountInfo={}),r.discountInfo.purchase=e.purchase,r.discountInfo.purchasePercent=e.purchasePercent}$.observable(o).setAllProperty({isNetworkError:!1,dataLoaded:!0,...r})}catch(e){!e.isCancelled&&!e.isUnauthorize&&console.error(e),$.observable(o).setProperty({isNetworkError:!0})}finally{return o}},t.updateFioAsync=async function(o,t,r,n){const a=await s.fetchJSON(`${e}/fio`,{method:"PATCH",body:JSON.stringify({firstName:o,lastName:t,middleName:r}),headers:{"Content-Type":"application/json"}},{noProcessResponse:!0});return new Promise(e=>{$.processResponse(a,s=>{var a,i;$.observable(n).setProperty({firstName:o,lastName:t,middleName:r,fullName:null===(a=`${t||""} ${o||""} ${r||""}`)||void 0===a?void 0:a.trim(),initials:null!==(i=null==o?void 0:o.slice(0,1))&&void 0!==i?i:""}),e({isSuccess:!0})},s=>{e({isSuccess:!1,error:s})})})},t.updateSexAsync=async function(o,t){const r=await s.fetchJSON(`${e}/sex`,{method:"PATCH",body:new URLSearchParams({sex:o})},{noProcessResponse:!0});return new Promise(e=>{$.processResponse(r,s=>{$.observable(t).setProperty({genderE:o}),e({isSuccess:!0})},s=>{e({isSuccess:!1,error:s})})})},t.updateBirthdayAsync=async function(o,t){const r=await s.fetchJSON(`${e}/birthday`,{method:"PATCH",body:new URLSearchParams({birthdayDate:o})},{noProcessResponse:!0});return new Promise(e=>{$.processResponse(r,s=>{$.observable(t).setProperty({birthdayDate:o}),e({isSuccess:!0})},s=>e({isSuccess:!1,error:s}))})},t.updateEmailAsync=async function(o,t){const r=await s.fetchJSON(`${e}/email`,{method:"PATCH",body:JSON.stringify({email:o}),headers:{"Content-Type":"application/json"}},{noProcessResponse:!0});return new Promise(e=>{$.processResponse(r,s=>{e({isSuccess:!0})},s=>{e({isSuccess:!1,error:s})})})},t.updatePhoneMobileAsync=async function(t,r,n,a){const i=await s.fetchJSON(`${e}/phonemobile`,{method:"PATCH",body:JSON.stringify({stage:t,fullPhoneMobile:r,confirmCode:n}),headers:{"Content-Type":"application/json"}},{noProcessResponse:!0});return new Promise(e=>{$.processResponse(i,s=>{o.updateVerificationToken(s.newToken),$.observable(a).setProperty({phone:r,formattedPhoneMobile:s.formattedPhoneMobile}),e({isSuccess:!0})},s=>{e({isSuccess:!1,error:s})})})},t.updateInnAsync=async function(o,t){const r=await s.fetchJSON(`${e}/inn`,{method:"PATCH",body:JSON.stringify({inn:o}),headers:{"Content-Type":"application/json"}},{noProcessResponse:!0});return new Promise(e=>{$.processResponse(r,s=>{$.observable(t).setProperty({inn:o}),e({isSuccess:!0})},s=>{e({isSuccess:!1,error:s})})})},t.updateImageAsync=async function(o,t){const r=await s.fetchJSON(`${e}/photo`,{method:"PATCH",body:new URLSearchParams({base64Image:o})},{noProcessResponse:!0});return new Promise(e=>{$.processResponse(r,s=>{$.observable(t).setProperty({userPhotoLink:s,hasPhoto:!0}),e({isSuccess:!0})},s=>{e({isSuccess:!1,error:s})})})},t.removeUserPhotoAsync=async function(o){const t=await s.fetchJSON(`${e}/photo`,{method:"DELETE"},{noProcessResponse:!0});return new Promise(e=>{$.processResponse(t,s=>{$.observable(o).setProperty({userPhotoLink:s,hasPhoto:!1}),e({isSuccess:!0})},s=>{e({isSuccess:!1,error:s})})})},t}();window.__spaModuleManager__.register("userInfoRequester",t)}();

},{}]},{},[1]);
