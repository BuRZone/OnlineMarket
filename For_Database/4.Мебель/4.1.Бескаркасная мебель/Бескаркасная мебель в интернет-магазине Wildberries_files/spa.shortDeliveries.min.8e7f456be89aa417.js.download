(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";$.views&&$.views.tags({shortDeliveries:{mainElement:".delivery__slider-wrap",template:'\n                <div class="delivery__slider-wrap">\n                {^{if ~tag.deliveries}}\n                    <div class="swiper-container">\n                        <div class="swiper-wrapper">\n                        {{for ~tag.deliveries}}\n                            <div class="swiper-slide" >\n                                <a href="{{:~deliveriesUrl}}" class="delivery__item">\n                                    <div class="delivery__info" data-link="class{merge: (totalToPay > 0) toggle=\'delivery__info--pay\'}">\n                                        {^{if totalToPay > 0}}\n                                        <div class="delivery__info-title">{{:~tag.localizer.haveUnpaidItemsVariable}} {{priceWithCurrencyV2:totalToPay true iso=currency}}</div>\n                                        <button type="button" class="btn-main delivery__info-btn">{{:~tag.localizer.payVariable}}</button>\n                                        {{else}}\n                                            {{if readyToReceiveToday}}\n                                                <div class="delivery__info-title delivery__info-title--success">{{:(courier ? ~tag.localizer.atCourier: ~tag.localizer.orderReady)}}</div>\n                                                    {^{if !courier && workTime && workTime != \'null\'}}\n                                                        <div class="delivery__info-text">{^{:workTime}}</div>\n                                                    {{/if}}\n                                                <div class="delivery__info-text">{{:deliveryType}}: {{trimWord:address \',\'}}</div>\n                                            {{else}}\n                                                <div class="delivery__info-title">Заказ в пути</div>\n                                                <div class="delivery__info-text delivery__info-text--transit">{{:receiveDate}}. Сообщим, когда можно получать</div>\n                                            {{/if}}\n                                        {{/if}}\n                                    </div>\n                                    \n                                    {^{if maxItems > 0}}\n                                    <div class="delivery__photo">\n                                        {{for products end=maxItems ~maxItems=maxItems ~allProducts=products}}\n                                        <div class="delivery__photo-item img-plug" data-link="class{merge:#index == ~maxItems-1 toggle=\'delivery__photo-item--count\'}data-numb{:(#index == ~maxItems -1 && ~allProducts.length > ~maxItems) ? ~allProducts.length-~maxItems : null}">\n                                            <img src="{{:~ImageUrl(code1S, \'c246x328\', 1)}}" alt="" width="45" height="60">\n                                        </div>\n                                        {{/for}}\n                                    </div>\n                                    {{/if}}\n                                    \n                                    {{if ~tag.qrCode && totalToPay == 0 && readyToReceiveToday}}\n                                        <div class="delivery__qr-wrap hide-desktop">\n                                            <img class="delivery__qr" src="data:image/png;base64,{{:~tag.qrCode}}" alt="qr-code" data-link="{tooltip classes=\'tooltip-qr\' pos=\'center bottom\' trigger=\'click\' tmplName=\'readyDeliveriesQrCodeTooltip\' tmplData=~tag.qrCode preventDefault=true}">\n                                            <div class="delivery__info-code hide-desktop">{{if showCode}}код: {{spaceFormatted:~tag.privateCode}}{{/if}}</div>\n                                        </div>\n                                    {{else totalToPay == 0 && !readyToReceiveToday}}\n                                        <div class="delivery__transit hide-desktop">\n                                            <img src="{{:~wbSettings.staticSiteUrl}}/i/v3/delivery/box.png" alt="transit" width="110" height="76">\n                                        </div>\n                                    {{/if}}\n                                </a>\n                            </div>\n                        {{/for}}\n                        </div>\n                        \n                        \n                        <button class="swiper-button-prev swiper-button-disabled"></button>\n                        <button class="swiper-button-next swiper-button-disabled"></button>\n                    </div>\n                    \n                    <div class="swiper-pagination"></div>\n                {{/if}}    \n                </div>\n                {^{if ~loading }}\n                <div class="delivery__preloader"></div>\n                {{/if}}\n                ',onUpdate:!1,minItems:3,init:function(){this.localizer=this.ctx.root.$localziation,this.ml=this.ctx.root.$moduleLoader;const e=this.ctx.root.$router.routes.find(e=>"SpaActiveOrdersEntrypoint"==e.name);e&&this.ctxPrm("deliveriesUrl",e.path)},async onAfterLink(){var e,i;this.ctxPrm("loading",!0);const t=await this.ctx.root.$services.groupedDeliveriesService.get({readyToReceive:"m"!=wb.settings.displayMode,short:!0,fromCache:!0}).catch(e=>console.log(e));if(!t)return void this.ctxPrm("loading",!1);let r=null!==(e=t.active)&&void 0!==e?e:[];if(t.postPayments&&(r=[...t.postPayments,...t.active]),r=r.filter(e=>!e.archive),this.ctxPrm("loading",!1),!t||r.length<1)return;let n=this;$.observable(n).setProperty({deliveries:r,privateCode:t.privateCode,qrCode:t.qrCode,tryInitPayPopup:function(){-1!==location.search.indexOf("paytherest")&&n.handler.call(this)},payTheRest:function(e){null==e||e.preventDefault(),n.ml.loadModuleAsync("paymentPopup").then(e=>{let i=this.products.map(e=>e.rId);e.showPayTheRestPopupAsync({useWbx:"ordo"!=this.source,totalToPay:this.totalToPay,rids:i})})}});const a=null===(i=n.mainElem[0])||void 0===i?void 0:i.querySelector(".swiper-container");if(!a)return;a.querySelectorAll(".delivery__info").forEach(e=>{const i=$.view(e),t=e.closest(".delivery__item").offsetWidth-Math.min(e.scrollWidth,e.offsetWidth)-12;let r=this.minItems;t>60&&(r=~~(t/60)),$.observable(i.data).setProperty("maxItems",r)});const s=new Swiper(a,{breakpoints:{1024:{}},init:!1,lazy:!0,preloadImages:!1,slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:a.querySelector(".swiper-button-next"),prevEl:a.querySelector(".swiper-button-prev")},pagination:r.length>1&&{el:this.mainElem[0].querySelector(".swiper-pagination"),clickable:!0,paginationType:"bullets",dynamicBullets:!0}});s.on("breakpoint",()=>{if(2==r.length){const e="m"==wb.settings.displayMode,i=this.mainElem[0].querySelector(".swiper-pagination");i&&(i.style.display=e?null:"none")}}),s.init()}}});

},{}]},{},[1]);
