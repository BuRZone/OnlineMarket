(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,_toPropertyKey(s.key),s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}!function(){let e=function(){function e(e,t,i){var s,n,o,d,r;this.id=this.$generateGuid(),this.parentId=e,this.nmId=t.nmId,this.showSize=t.showSize,this.sizes=null!==(s=null===(n=t.sizes)||void 0===n?void 0:n.map(e=>e))&&void 0!==s?s:[],this.sizeTable=null!==(o=null===(d=t.sizeTable)||void 0===d?void 0:d.map(e=>e))&&void 0!==o?o:[],this.selectedChrtId=null===(r=t.selectedSize)||void 0===r?void 0:r.characteristicId,this.showAllSizes=null!=t.selectedSize,this.allSizesShown=null!=t.selectedSize,this.deliveryInfoHelper=i,this.blinkSizes=!1,this.onSizeUpdated=this.onSizeUpdated.bind(this),this.onColorChanged=this.onColorChanged.bind(this),this.onSameProductOpended=this.onSameProductOpended.bind(this)}var t=e.prototype;return t.init=function(){return this._bindEvents(),this},t.destroy=function(){this._unbindEvents()},t.onSizeUpdated=function(e){const{nmId:t,selectedSize:i}=e.detail;t==this.nmId&&$.observable(this).setProperty({selectedChrtId:i})},t.onColorChanged=function(e){var t,i,s,n;const{sourceId:o,sourceNmId:d,selectedNomenclature:r}=e.detail;o==this.parentId&&d==this.nmId&&($.observable(this).setProperty({nmId:r.nmId,showSize:r.showSize,selectedChrtId:null===(t=r.selectedSize)||void 0===t?void 0:t.characteristicId,showAllSizes:null!=r.selectedSize,allSizesShown:null!=r.selectedSize,blinkSizes:!1}),$.observable(this.sizeTable).refresh(null!==(i=null===(s=r.sizeTable)||void 0===s?void 0:s.map(e=>e))&&void 0!==i?i:[]),$.observable(this.sizes).refresh(null!==(n=r.sizes)&&void 0!==n?n:[]),this.$helper.nextTick().then(()=>this.checkSizeList()))},t.onSameProductOpended=function(e){var t;let{sourceId:i,sourceNmId:s,selectedSize:n}=e.detail;i==this.parentId&&s==this.nmId&&n!=this.selectedChrtId&&(n||this.showSize||(n=null===(t=this.sizes)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.characteristicId),this.$eventBus.dispatchEvent(new CustomEvent("ProductSizeUpdated",{detail:{nmId:this.nmId,selectedSize:n}})))},t.updateSize=function(e){const{data:t}=$.view(e.currentTarget);t&&this.$eventBus.dispatchEvent(new CustomEvent("ProductSizeUpdated",{detail:{nmId:this.nmId,selectedSize:t.characteristicId}}))},t.validateSize=function(){return!this.showSize||null!=this.selectedChrtId},t.blinkSize=function(){$.observable(this).setProperty({blinkSizes:!0})},t.removeBlink=function(){$.observable(this).setProperty({blinkSizes:!1})},t.toggleSizes=function(){$.observable(this).setProperty({showAllSizes:!1,allSizesShown:!0})},t.checkSizeList=function(){const e=document.getElementById(this.id);null!=e&&$.observable(this).setProperty({showAllSizes:e.scrollHeight-e.clientHeight>40})},t.showTableOfSizes=function(){let[e,...t]=this.sizeTable;const i=Object.values(this.sizes).reduce((e,t)=>(e[t.characteristicId]={chrtId:t.characteristicId,sizeName:t.sizeName})&&e,{});t=t.filter(e=>null!=i[e.chrtId]),this.$moduleLoader.loadModuleAsync("sizeTable").then(s=>{s.showSizeTablePopup({nmId:this.nmId,selectedSize:this.sizes.find(e=>e.characteristicId==this.selectedChrtId),headCells:e,bodyCells:t,sizeDictionary:i,statCardWba:this.statCardWba})})},t._bindEvents=function(){this.$eventBus.addEventListener("ProductSizeUpdated",this.onSizeUpdated),this.$eventBus.addEventListener("ProductColorChanged",this.onColorChanged),this.$eventBus.addEventListener("ProductChanged",this.onColorChanged),this.$eventBus.addEventListener("SameProductOpened",this.onSameProductOpended)},t._unbindEvents=function(){this.$eventBus.removeEventListener("ProductSizeUpdated",this.onSizeUpdated),this.$eventBus.removeEventListener("ProductColorChanged",this.onColorChanged),this.$eventBus.removeEventListener("ProductChanged",this.onColorChanged),this.$eventBus.removeEventListener("SameProductOpened",this.onSameProductOpended)},_createClass(e,[{key:"template",get:function(){return e.template}}]),e}();window.__spaModuleManager__.register("productCardSizes",e)}();

},{}]},{},[1]);
