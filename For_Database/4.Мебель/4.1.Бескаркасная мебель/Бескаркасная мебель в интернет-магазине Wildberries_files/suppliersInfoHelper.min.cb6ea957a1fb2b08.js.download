(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const FRAME_OFFSET=1e3/60,FRAMES_IN_MLS=12;let SupplierInfoModel=function(e){function t(t){var o;return o=e.call(this)||this,t?(o.nmId=t.nmId,o.legalAddress=t.legalAddress,o.ogrn=t.ogrn,o.ogrnip=t.ogrnip,o.supplierName=t.supplierName,o.trademark=t.trademark,o.dt=t.dt,o.supplierId=t.supplierId,o.showPharmaLink=[225188,181237,313828,231062,236960].includes(t.supplierId),o.isDefaultSupplier=t.isDefaultSupplier,o.orgForms=t.orgForms,o.shopName=t.shopName,o.logoUrl=t.logoUrl,o.shopId=t.shopId,o):(o.isDefaultSupplier=!0,_assertThisInitialized(o))}_inheritsLoose(t,e);var o=t.prototype;return o.sendClickEvent=function(){this.$analitic.sendEvent("Item_Supplier_T",{name:this.supplierName,id:this.supplierId,type:"fullsize"}),this.$analitic.proceedAndSave("ISC")},o.scrollDetails=function(e){const t=e.currentTarget,o=e.clientX,r=t.scrollLeft,s=e=>{const s=e.clientX-o;t.scrollLeft=r-s},n=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",n);const e=t.scrollWidth-t.clientWidth;let o=0;const r=t.childNodes.toArray().find(e=>(o+=e.offsetWidth)>t.scrollLeft),i=((o-t.scrollLeft)/r.offsetWidth<.5||e==t.scrollLeft?Math.min(o,e):Math.max(o-r.offsetWidth,0))-t.scrollLeft;window.requestAnimationFrame(()=>customScrollSnap(t,i,i/12))};document.addEventListener("mousemove",s),document.addEventListener("mouseup",n)},t}(WbSpaModel);function customScrollSnap(e,t,o){Math.abs(o)-Math.abs(t)>=0||(t-=o,e.scrollBy(o,0),window.requestAnimationFrame(()=>customScrollSnap(e,t,o)))}module.exports=SupplierInfoModel;

},{}],2:[function(require,module,exports){
"use strict";function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}!function(){const e=require("./supplierInfo");let t=function(){function t(e,t,n,i){this.parentId=e,this.nmId=t,this.deliveryInfo=n,this.statsModel=i,this.currentSupplier={},this.onColorChanged=this.onColorChanged.bind(this),this.onProductChanged=this.onProductChanged.bind(this)}t.loadTooltipTemplateAsync=function(){return $.views.loadTemplateAsync("suppliersInfoTooltipster")};var n=t.prototype;return n.init=function(){return this._bindEvents(),this},n.destroy=function(){return this._unbindEvents(),this},n.onColorChanged=function(e){const{sourceId:t,sourceNmId:n,selectedNomenclature:i}=e.detail;t===this.parentId&&n===this.nmId&&(this.nmId=i.nmId,this.deliveryInfo=i.supplierDeliveryInfo,this.showSupplierInfo())},n.onProductChanged=function(e){const{isDetailsLoaded:t,sourceId:n,sourceNmId:i,product:r,selectedNomenclature:s}=e.detail;this.parentId===n&&this.nmId===i&&(this.nmId=s.nmId,this.deliveryInfo=r.supplierDeliveryInfo,this.showSupplierInfo())},n.showSupplierInfo=function(){return this._setSuppliersInfoAsync(this.nmId,this.deliveryInfo)},n.getSuppliersInfo=async function(e,t){return await this._getSuppliersInfo(e,t)},n._getSuppliersInfo=async function(t,n){n||(n=this.deliveryInfo),await this.$moduleLoader.loadServiceAsync("suppliersService");const i=await this.$services.suppliersService.loadBasicSupplierInfoAsync(t),r=new e(i);let s=null;return null!=r&&(s=await this.$services.suppliersService.getSupplierExtInfo(r.supplierId,n)),Promise.resolve({suppliersInfo:r,extInfo:s})},n._setSuppliersInfoAsync=async function(e,t){const{suppliersInfo:n,extInfo:i}=await this.getSuppliersInfo(e,t);return null!=n&&(this.statsModel&&(this.statsModel.sendEvent("Item_Seller_Info_S"),n.showPharmaLink&&this.statsModel.sendEvent("Item_Medical_Info_S")),i&&(n.extInfo=i),this.$observable.setProperty({currentSupplier:n})),Promise.resolve(this.currentSupplier)},n._bindEvents=function(){this.$eventBus.addEventListener("ProductColorChanged",this.onColorChanged),this.$eventBus.addEventListener("ProductChanged",this.onProductChanged)},n._unbindEvents=function(){this.$eventBus.removeEventListener("ProductColorChanged",this.onColorChanged),this.$eventBus.removeEventListener("ProductChanged",this.onProductChanged)},_createClass(t,[{key:"template",get:function(){return t.template}}]),t}();$.views.tags({supplierSlider:{mainElement:".j-sw-slider-seller-info",dataBoundOnly:!0,render:!1,init(){this.ml=this.ctx.root.$moduleLoader},onDispose(){var e;null===(e=this.swiper)||void 0===e||e.destroy()},async onAfterLink(){if("d"!==wb.settings.displayMode)return;if(!this.mainElem)return;const e=this.mainElem[0].querySelector(".swiper-container");e&&(await this.ml.loadModuleAsync("swiper",!0),this.swiper=new Swiper(e,Object.assign({navigation:{nextEl:this.mainElem[0].querySelector(".swiper-button-next"),prevEl:this.mainElem[0].querySelector(".swiper-button-prev")},on:{init:function(){this.el.parentNode.classList.remove("sw-slider-seller-info--hide-arrow")}}},this.tagCtx.props)))},onUpdate:!1}}),window.__spaModuleManager__.register("suppliersInfoHelper",t)}();

},{"./supplierInfo":1}]},{},[2]);
