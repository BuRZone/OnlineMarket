(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";!function(a){a.views&&a.views.tags({zoomImage:{dataBoundOnly:!0,mainElement:"div",template:"\n                <div class='zoom-image-container'>\n                    <img class='{{:~imageClass}} j-zoom-image' width='900' height='1200' {{if ~lazy}}loading='lazy'{{/if}} data-link=\"src{:~tag.imageSrc}css-background-image{:('url(' + ~tag.bgImageSrc +')')}class{merge: ~tag.imageLoaded toggle='hide'}{on 'load' ~tag.renderCanvas}\"/>\n                    <canvas class='{{:~canvasClass}}  j-image-canvas hide' data-link=\"class{merge: !~tag.imageLoaded toggle='hide'}{on 'mousemove' ~tag.renderZoom}{on 'mouseleave' ~tag.resetCanvas}\"></canvas>\n                </div>\n            ",init(a){var t,e,i;this.imageSrc=null!==(t=a.props.imageSrc)&&void 0!==t?t:null===(e=this.linkCtx.elem)||void 0===e?void 0:e.dataset.zoomImage,this.bgImageSrc=a.props.bgImageSrc,this.zoomRatio=null!==(i=a.props.zoomRatio)&&void 0!==i?i:1.7,this.imageLoaded=!1},onAfterLink(){const a=this.tagCtx.mainElem[0];this.image=a.querySelector(".j-zoom-image"),this.canvasElem=a.querySelector(".j-image-canvas"),this.canvasCtx=this.canvasElem.getContext("2d")},onUpdate(t,e,i){return this.imageSrc!==i[0].props.imageSrc&&(a.observable(this).setProperty({imageLoaded:!1}),a.observable(this).setProperty({imageSrc:i[0].props.imageSrc,bgImageSrc:i[0].props.bgImageSrc})),!1},renderCanvas(){this.canvasCtx.setTransform(1,0,0,1,0,0),this.canvasCtx.clearRect(0,0,this.canvasElem.width,this.canvasElem.height),this._render(),a.observable(this).setProperty({imageLoaded:!0})},renderZoom(a){if(!WbSpaModel.prototype.$isDesktop)return;const t=a.offsetX*this.displayRatio,e=a.offsetY*this.displayRatio;let i,s;i=this.zoomRatio*t-this.canvasElem.width/2<0?0:Math.min(this.zoomRatio*t-this.canvasElem.width/2,this.canvasElem.width*(this.zoomRatio-1)),s=this.zoomRatio*e-this.canvasElem.height/2<0?0:Math.min(this.zoomRatio*e-this.canvasElem.height/2,this.canvasElem.height*(this.zoomRatio-1)),this.canvasCtx.setTransform(this.zoomRatio,0,0,this.zoomRatio,-i,-s),this.canvasCtx.drawImage(this.image,0,0)},resetCanvas(){this.canvasCtx.setTransform(1,0,0,1,0,0),this.canvasCtx.drawImage(this.image,0,0)},_render(){this.canvasElem.width=this.image.naturalWidth,this.canvasElem.height=this.image.naturalHeight;const a=this.image.getBoundingClientRect();this.displayRatio=this.image.naturalWidth/a.width,this.canvasCtx.drawImage(this.image,0,0)}}})}(jQuery);

},{}]},{},[1]);
